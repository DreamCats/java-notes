# js为什么是单线程

## 比喻

进程就是一个公司，每个公司都有自己的资源可以调度；公司之间是相互独立的；而线程就是公司中的每个员工(你，我，他)，多个员工一起合作，完成任务，公司可以有一名员工或多个，员工之间共享公司的空间

## 什么是进程？

进程：是cpu分配资源的最小单位；即是能拥有资源和独立运行的最小单位

## 什么是线程？

线程：是cpu调度的最小单位；即线程是简历在进程的基础上的一次程序运行单位，一个进程中可以有多个线程

## 浏览器是多进程

放在浏览器中，每打开一个tab页面，其实就是新开了一个进程，在这个进程中，还有ui渲染线程，js引擎线程，http请求线程等。 所以，浏览器是一个多进程的。

### 为什么设计单线程？

这主要和js的用途有关，js是作为浏览器的脚本语言，主要是实现用户与浏览器的交互，以及操作dom；这决定了它只能是单线程，否则会带来很复杂的同步问题。 举个例子：如果js被设计了多线程，如果有一个线程要修改一个dom元素，另一个线程要删除这个dom元素，此时浏览器就会一脸茫然，不知所措。所以，为了避免复杂性，从一诞生，JavaScript就是单线程，这已经成了这门语言的核心特征，将来也不会改变（主要是怕同步带来的复杂性）

为了利用多核CPU的计算能力，HTML5提出Web Worker标准，允许JavaScript脚本创建多个线程，**但是子线程完全受主线程控制，且不得操作DOM**。所以，这个新标准并没有改变JavaScript单线程的本质。

